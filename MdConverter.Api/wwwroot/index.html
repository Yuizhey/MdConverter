<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Renderer</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<h1>Markdown Renderer</h1>

<div class="button-container">
    <button id="loginButton" onclick="location.href='login.html'">Войти</button>
    <button id="registerButton" onclick="location.href='Register.html'">Зарегистрироваться</button>
    <button id="logoutButton" disabled>Выйти</button>
</div>

<div class="markdown-container">
    <textarea id="markdownText" placeholder="Введите ваш Markdown здесь..."></textarea>
    <button id="convertButton">Конвертировать</button>
    <div id="renderedHtml">Результат отрендеренного Markdown будет здесь...</div>
</div>

<script src="/js/Markdown.js"></script>
<script src="/js/AuthorizeCheck.js"></script>
<script>
    document.getElementById('logoutButton').addEventListener('click', async function () {
        try {
            // Отправляем запрос на сервер для выхода (удаляем токен на сервере)
            const response = await fetch('/Account/Logout', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            });

            if (response.ok) {
                // Удаляем куку "token" на клиенте
                document.cookie = 'token=; Max-Age=0; path=/';  // Удаление куки

                // Делаем кнопку "Выйти" неактивной
                document.getElementById('logoutButton').disabled = true;

                // Можно, например, редиректить на страницу входа или обновить страницу
                location.href = '/index.html';  // Перенаправляем на страницу входа
            } else {
                alert('Ошибка при выходе');
            }
        } catch (error) {
            console.error('Ошибка сети или сервера:', error);
            alert('Произошла ошибка при выходе.');
        }
    });

</script>
</body>
</html>
